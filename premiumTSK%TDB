-- Premium Users List
local premiumUsers = {
    "TDB_Kingdarkness",  -- Add your username here for premium access
    -- You can add more usernames here:
    -- "OtherUser1",
    -- "OtherUser2",
}

-- Services
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Players = game:GetService("Players")
local Workspace = game:GetService("Workspace")

-- Function to give Premium Users the Key GUI
local function createKeyGUI(player)
    -- Create a screen GUI for the player
    local screenGui = Instance.new("ScreenGui")
    screenGui.Parent = player:WaitForChild("PlayerGui")

    -- Create the "Key" button
    local keyButton = Instance.new("TextButton")
    keyButton.Name = "KeyButton"
    keyButton.Size = UDim2.new(0, 200, 0, 50)  -- Size of the button
    keyButton.Position = UDim2.new(0.5, -100, 0.8, 0)  -- Position on screen
    keyButton.BackgroundColor3 = Color3.fromRGB(255, 255, 0)  -- Yellow color
    keyButton.Text = "Key"
    keyButton.TextColor3 = Color3.fromRGB(0, 0, 0)  -- Black text
    keyButton.Font = Enum.Font.SourceSans
    keyButton.TextSize = 24
    keyButton.Parent = screenGui

    -- Create a TextBox for code input
    local codeInput = Instance.new("TextBox")
    codeInput.Name = "CodeInput"
    codeInput.Size = UDim2.new(0, 200, 0, 50)
    codeInput.Position = UDim2.new(0.5, -100, 0.7, 0)
    codeInput.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    codeInput.PlaceholderText = "Enter Code (123)"
    codeInput.TextColor3 = Color3.fromRGB(0, 0, 0)
    codeInput.Font = Enum.Font.SourceSans
    codeInput.TextSize = 24
    codeInput.Parent = screenGui

    -- Function to handle when the player clicks the Key button
    keyButton.MouseButton1Click:Connect(function()
        local enteredCode = codeInput.Text
        -- Check if the entered code is "123"
        if enteredCode == "123" then
            -- Unlock door or perform other actions here
            print(player.Name .. " has entered the correct code!")

            -- Example: Unlock a door
            local yellowDoor = Workspace:FindFirstChild("YellowDoor")
            if yellowDoor then
                yellowDoor.CFrame = yellowDoor.CFrame * CFrame.new(0, 10, 0)  -- Lift the door up
                yellowDoor.CanCollide = false  -- Make the door non-collidable
                print("Yellow door opened!")
            end

            -- Optionally, hide the GUI once the key is used
            screenGui:Destroy()

            -- Notify the player that they've unlocked the Yellow Door
            local notificationEvent = ReplicatedStorage:FindFirstChild("PremiumNotification")
            if not notificationEvent then
                notificationEvent = Instance.new("RemoteEvent")
                notificationEvent.Name = "PremiumNotification"
                notificationEvent.Parent = ReplicatedStorage
            end
            notificationEvent:FireClient(player, "You have unlocked the Yellow Door with the Key!")
        else
            -- If the code is incorrect, notify the player
            notificationEvent:FireClient(player, "Incorrect code! Please try again.")
        end
    end)
end

-- When a player joins the game, check if they are on the premium list
Players.PlayerAdded:Connect(function(player)
    -- Check if player is in the premiumUsers list
    for _, username in pairs(premiumUsers) do
        if player.Name == username then
            -- Grant premium access by creating the Key GUI
            createKeyGUI(player)

            -- Notify the player they have received the Key GUI
            local notificationEvent = ReplicatedStorage:FindFirstChild("PremiumNotification")
            if not notificationEvent then
                notificationEvent = Instance.new("RemoteEvent")
                notificationEvent.Name = "PremiumNotification"
                notificationEvent.Parent = ReplicatedStorage
            end
            notificationEvent:FireClient(player, "You have received the Key!")

            print(player.Name .. " has received the Key GUI.")
        end
    end
end)
